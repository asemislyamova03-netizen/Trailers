{% extends "base.html" %}

{% block title %}Номенклатура{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0">Номенклатура</h1>
    <a href="{{ url_for('main.item_create') }}" class="btn btn-primary">Новая позиция</a>
</div>

<table class="table table-sm table-striped align-middle">
    <thead>
        <tr>
            <th>ID</th>
            <th>Тип</th>
            <th>Артикул</th>
            <th>Наименование</th>
            <th>Оси</th>
            <th>Размеры габаритные</th>
            <th>Размеры кузова</th>
            <th>Базовая цена</th>
            <th>Активен</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for i in items %}
        <tr>
            <td>{{ i.id }}</td>
            <td>{{ i.item_type }}</td>
            <td>{{ i.article or '' }}</td>
            <td>{{ i.name }}</td>
            <td>{{ i.axle_count or '' }}</td>
            <td>{{ i.size_external or '' }}</td>
            <td>{{ i.size_body or '' }}</td>
            <td>{{ '%.0f'|format(i.base_price) if i.base_price is not none else '' }}</td>
            <td>
                {% if i.is_active %}
                    <span class="badge bg-success">Да</span>
                {% else %}
                    <span class="badge bg-secondary">Нет</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('main.item_edit', item_id=i.id) }}"
                   class="btn btn-sm btn-outline-primary">Изменить</a>
                <a href="{{ url_for('main.item_delete', item_id=i.id) }}"
                   class="btn btn-sm btn-outline-danger"
                   onclick="return confirm('Удалить позицию номенклатуры?');">
                    Удалить
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
